{% extends "base.html" %}

{% block title %}Booking Calendar - MuseumHub{% endblock %}

{% block content %}
<div class="modern-container">
    <div class="page-header">
        <h2><i class="fas fa-calendar-alt"></i> Booking Calendar</h2>
        <p class="subtitle">Select a date to view available time slots</p>
    </div>

    <div class="calendar-navigation">
        <a href="{{ url_for('calendar_page', month=month-1 if month>1 else 12, year=year if month>1 else year-1) }}" class="modern-btn secondary">
            <i class="fas fa-chevron-left"></i> Previous Month
        </a>
        <h3 class="calendar-month">{{ month }}/{{ year }}</h3>
        <a href="{{ url_for('calendar_page', month=month+1 if month<12 else 1, year=year if month<12 else year+1) }}" class="modern-btn secondary">
            Next Month <i class="fas fa-chevron-right"></i>
        </a>
    </div>

    <div class="calendar-wrapper">
        <table class="modern-calendar">
            <thead>
                <tr>
                    <th>Mon</th>
                    <th>Tue</th>
                    <th>Wed</th>
                    <th>Thu</th>
                    <th>Fri</th>
                    <th>Sat</th>
                    <th>Sun</th>
                </tr>
            </thead>
            <tbody>
                {% set start_weekday = (first_day + 1) % 7 %}
                {% set day = 1 %}
                {% for week in range(0,6) %}
                    <tr>
                    {% for wd in range(0,7) %}
                        {% if week==0 and wd < start_weekday %}
                            <td class="empty-day"></td>
                        {% elif day > days_in_month %}
                            <td class="empty-day"></td>
                        {% else %}
                            {% set date_str = "{:04d}-{:02d}-{:02d}".format(year, month, day) %}
                            <td class="calendar-day {% if date_str == today.isoformat() %}today{% endif %}">
                                <div class="day-number">
                                    <strong>{{ day }}</strong>
                                </div>
                                <div class="day-action">
                                    <a href="{{ url_for('day_view') }}?date={{ date_str }}" class="day-link">
                                        <i class="fas fa-eye"></i> View Slots
                                    </a>
                                </div>
                            </td>
                            {% set day = day + 1 %}
                        {% endif %}
                    {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<style>
.modern-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem;
}

.page-header {
    text-align: center;
    margin-bottom: 2rem;
}

.page-header h2 {
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
}

.subtitle {
    color: rgba(255, 255, 255, 0.8);
    font-size: 1.1rem;
}

.calendar-navigation {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    flex-wrap: wrap;
    gap: 1rem;
}

.calendar-month {
    font-size: 1.8rem;
    font-weight: 600;
    color: white;
    margin: 0;
}

.calendar-wrapper {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 20px;
    padding: 2rem;
    overflow-x: auto;
}

.modern-calendar {
    width: 100%;
    border-collapse: collapse;
    margin: 0;
}

.modern-calendar thead th {
    padding: 1rem;
    background: rgba(255, 255, 255, 0.1);
    color: white;
    font-weight: 600;
    text-align: center;
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 10px 10px 0 0;
}

.modern-calendar tbody td {
    padding: 1rem;
    border: 1px solid rgba(255, 255, 255, 0.2);
    text-align: center;
    vertical-align: top;
    min-height: 100px;
    position: relative;
    transition: all 0.3s ease;
}

.modern-calendar tbody td:hover {
    background: rgba(255, 255, 255, 0.1);
    transform: scale(1.02);
}

.calendar-day {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 10px;
    min-height: 120px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    padding: 1rem;
}

.calendar-day.today {
    background: rgba(255, 0, 255, 0.2);
    border: 2px solid #ff00ff;
    box-shadow: 0 0 20px rgba(255, 0, 255, 0.3);
}

.empty-day {
    background: transparent;
    border: none;
}

.day-number {
    font-size: 1.5rem;
    color: white;
    margin-bottom: 0.5rem;
}

.day-action {
    margin-top: auto;
}

.day-link {
    display: inline-block;
    padding: 0.5rem 1rem;
    background: rgba(255, 0, 255, 0.2);
    color: white;
    text-decoration: none;
    border-radius: 8px;
    font-size: 0.9rem;
    transition: all 0.3s ease;
    border: 1px solid rgba(255, 0, 255, 0.3);
}

.day-link:hover {
    background: rgba(255, 0, 255, 0.4);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(255, 0, 255, 0.3);
}

.day-link i {
    margin-right: 0.5rem;
}

@media (max-width: 768px) {
    .calendar-navigation {
        flex-direction: column;
        text-align: center;
    }
    
    .modern-calendar {
        font-size: 0.9rem;
    }
    
    .calendar-day {
        min-height: 80px;
        padding: 0.5rem;
    }
    
    .day-number {
        font-size: 1.2rem;
    }
    
    .day-link {
        font-size: 0.8rem;
        padding: 0.4rem 0.8rem;
    }
}
</style>
{% endblock %}
